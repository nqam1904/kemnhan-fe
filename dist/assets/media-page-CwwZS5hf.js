import{r as a,j as t,s as m,Q as v,X as D,M as r,v as o,w as Y}from"./vendor-react-D439mYZB.js";import{R as B,e as h,C as N}from"./index-CCO37Pg2.js";import{f as x}from"./format-time-CqX4gBLH.js";import{c as T}from"./styles-Bw6Lb06x.js";import"./vendor-misc-BkUckcGj.js";import"./vendor-redux-CY9rYXZh.js";import"./vendor-ui-qtF25uBn.js";import"./vendor-utils-DifT8CeW.js";const E=B.injectEndpoints({endpoints:s=>({getSettings:s.query({query:()=>({url:h.main.settings,method:"GET"})}),getSettingById:s.query({query:n=>({url:`${h.main.settings}/${n}`,method:"GET"})}),updateSetting:s.mutation({query:({id:n,body:l})=>({url:`${h.main.settings}/${n}`,method:"PUT",body:l})})})}),{useGetSettingsQuery:k,useLazyGetSettingByIdQuery:q,useUpdateSettingMutation:F}=E;function G(){const{data:s=[],isLoading:n,refetch:l}=k(),[j]=q(),[f]=F(),[S,i]=a.useState(!1),[M,b]=a.useState(""),[c,u]=a.useState(""),[p,g]=a.useState(null),y=async e=>{try{const d=await j(e).unwrap();g(e),i(!0),b("Cập nhật danh mục"),u(d.value)}catch{o.error("Có lỗi xảy ra")}},w=async e=>{if(e.preventDefault(),!c.trim()||!p){o.warning("Vui lòng điền thông tin!");return}try{await f({id:p,body:{value:c}}).unwrap(),i(!1),u(""),g(null),o.success("Cập nhật thành công!"),l()}catch{o.error("Có lỗi xảy ra")}},C=a.useMemo(()=>[{name:"#",selector:e=>e.id,sortable:!0},{name:"Media",selector:e=>e.value,sortable:!0},{name:"Ngày tạo",selector:e=>e.createDate||"",right:!0,cell:e=>t.jsx("span",{children:x(e.createDate,"DD/MM/YYYY")})},{name:"Ngày chỉnh sửa",selector:e=>e.writeDate||"",right:!0,cell:e=>t.jsx("span",{children:x(e.writeDate,"DD/MM/YYYY")})},{name:"Hành động",selector:e=>t.jsx(m,{type:"button",className:"btn btn-success white mr-10",onClick:()=>y(e.id),children:"Cập nhật"})}],[y]);return t.jsxs(t.Fragment,{children:[t.jsx("h1",{className:"mt-10",children:" Link youtube"}),t.jsx(v,{autoClose:1e3}),t.jsx(D,{title:"",columns:C,data:s,defaultSortFieldId:"title",pagination:!0,progressPending:n,responsive:!0,dense:!0,customStyles:T}),t.jsx(r,{show:S,onHide:()=>{i(!1)},backdrop:"static",children:t.jsxs("form",{onSubmit:w,children:[t.jsx(r.Header,{closeButton:!0,children:t.jsxs(r.Title,{children:[" ",M," "]})}),t.jsxs(r.Body,{children:[t.jsx("label",{children:" Link youtube "}),t.jsx("input",{className:"form-control",name:"value",value:c,onChange:e=>u(e.target.value)})]}),t.jsxs(r.Footer,{children:[t.jsx(m,{variant:"secondary",type:"button",onClick:()=>{i(!1)},children:"Đóng"}),t.jsx(m,{variant:"primary",type:"submit",children:"Lưu"})]})]})})]})}const I={title:`Media - ${N.appName}`};function V(){return t.jsxs(t.Fragment,{children:[t.jsx(Y,{children:t.jsxs("title",{children:[" ",I.title]})}),t.jsx(G,{})]})}export{V as default};
