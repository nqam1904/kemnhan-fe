import{r as s,v as E,j as e,s as c,X as T,M as r,w as k}from"./vendor-react-D439mYZB.js";import{R as B,e as d,a as F,C as G}from"./index-CCO37Pg2.js";import{c as I}from"./styles-Bw6Lb06x.js";import{a as i}from"./format-time-CqX4gBLH.js";import"./vendor-misc-BkUckcGj.js";import"./vendor-redux-CY9rYXZh.js";import"./vendor-ui-qtF25uBn.js";import"./vendor-utils-DifT8CeW.js";const q=B.injectEndpoints({endpoints:l=>({getCustomers:l.query({query:()=>({url:d.dashboard.customers,method:"GET"})}),getCustomerById:l.query({query:o=>({url:`${d.dashboard.customers}/${o}`,method:"GET"})})})}),{useGetCustomersQuery:R,useLazyGetCustomerByIdQuery:X}=q,_=()=>{const{data:l=[],isLoading:o}=R(),h=F(),[m]=X(),[x,n]=s.useState(!1),[p,j]=s.useState(""),[b,g]=s.useState(""),[N,f]=s.useState(""),[y,v]=s.useState(""),[D,S]=s.useState(""),[w,C]=s.useState(""),[M,H]=s.useState(""),u=s.useCallback(async t=>{try{const a=await m(t).unwrap();n(!0),j("Thông tin khách hàng"),g(a.firstName||""),f(a.lastName||""),v(a.phone||""),C(a.email||""),S(a.address||""),H(a.createDate||"")}catch{E.error("Có lỗi xảy ra")}},[m]),Y=s.useMemo(()=>[{name:"#",selector:"id",sortable:!0},{name:"Họ",selector:"firstName",sortable:!0},{name:"Tên",selector:"lastName",sortable:!0},{name:"Số điện thoại",selector:"phone",sortable:!0,right:!0},{name:"Email",selector:"email",sortable:!0,right:!0},{name:"Ngày mua hàng",selector:"createDate",sortable:!0,right:!0,cell:t=>e.jsx("span",{children:i(t.createDate,"HH:mm DD/MM/YYYY")})},{name:"Ngày chỉnh sửa",selector:"writeDate",sortable:!0,right:!0,cell:t=>e.jsx("span",{children:i(t.writeDate,"HH:mm DD/MM/YYYY")})},{name:"Hành động",selector:t=>e.jsx(c,{type:"button",className:"btn btn-primary white mr-10",onClick:()=>u(t.id),children:"Xem chi tiết"})}],[u]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mt-10 mbt-10",children:[e.jsx("h1",{className:"m-0",children:"Danh sách khách hàng"}),e.jsx("div",{children:e.jsx(c,{variant:"success",type:"button",onClick:()=>{h.push("https://kemnhanonline.vn/api/customers/export")},children:"Xuất Excel"})})]}),e.jsx(T,{title:"Khách hàng",columns:Y,data:l,defaultSortFieldId:"title",pagination:!0,responsive:!0,progressPending:o,dense:!0,customStyles:I}),e.jsx(r,{show:x,size:"lg",onHide:()=>{n(!1)},children:e.jsxs("form",{onSubmit:t=>t.preventDefault(),children:[e.jsx(r.Header,{closeButton:!0,children:e.jsxs(r.Title,{children:[" ",p," "]})}),e.jsxs(r.Body,{children:[e.jsxs("div",{className:"row mb-3",children:[e.jsxs("div",{className:"form-group col-6",children:[e.jsxs("label",{children:["Họ ",e.jsx("sup",{className:"sub_text",children:"*"})]}),e.jsx("input",{className:"form-control",value:b,disabled:!0})]}),e.jsxs("div",{className:" form-group col-6",children:[e.jsxs("label",{children:["Tên ",e.jsx("sup",{className:"sub_text",children:"*"})]}),e.jsx("input",{className:"form-control",value:N,disabled:!0})]})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsxs("div",{className:" form-group col-6",children:[e.jsxs("label",{children:["Số điện thoại ",e.jsx("sup",{className:"sub_text",children:"*"})]}),e.jsx("input",{className:"form-control",value:y.toString(),disabled:!0})]}),e.jsxs("div",{className:" form-group col-6",children:[e.jsxs("label",{children:["Email ",e.jsx("sup",{className:"sub_text",children:"*"})]}),e.jsx("input",{className:"form-control",value:w,disabled:!0})]})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsxs("div",{className:" form-group col-6",children:[e.jsx("label",{children:" Địa chỉ"}),e.jsx("input",{className:"form-control",value:D,disabled:!0})]}),e.jsxs("div",{className:" form-group col-6",children:[e.jsx("label",{children:" Ngày mua hàng"}),e.jsx("input",{className:"form-control",value:i(M,"HH:mm DD/MM/YYYY")||"",disabled:!0})]})]})]}),e.jsx(r.Footer,{children:e.jsx(c,{variant:"secondary",type:"button",onClick:()=>{n(!1)},children:"Đóng"})})]})})]})},A={title:`Khách hàng - ${G.appName}`};function J(){return e.jsxs(e.Fragment,{children:[e.jsx(k,{children:e.jsxs("title",{children:[" ",A.title]})}),e.jsx(_,{})]})}export{J as default};
