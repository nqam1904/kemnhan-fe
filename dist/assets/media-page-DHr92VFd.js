import{R as D,e as m,j as e,B as h,Q as v,c as i,H as B,d as Y}from"./index-Cisqq87o.js";import{f as x}from"./format-time-Di1EMY9f.js";import{r as a}from"./vendor-D10guwLI.js";import{e as N}from"./index.es-3P-hqikk.js";import{c as T}from"./styles-Bw6Lb06x.js";import{M as r}from"./Modal-BE1P8Ww6.js";import"./dayjs.min-DmYrFLVn.js";const E=D.injectEndpoints({endpoints:s=>({getSettings:s.query({query:()=>({url:m.main.settings,method:"GET"})}),getSettingById:s.query({query:n=>({url:`${m.main.settings}/${n}`,method:"GET"})}),updateSetting:s.mutation({query:({id:n,body:l})=>({url:`${m.main.settings}/${n}`,method:"PUT",body:l})})})}),{useGetSettingsQuery:k,useLazyGetSettingByIdQuery:q,useUpdateSettingMutation:F}=E;function G(){const{data:s=[],isLoading:n,refetch:l}=k(),[j]=q(),[f]=F(),[S,o]=a.useState(!1),[M,b]=a.useState(""),[c,u]=a.useState(""),[p,g]=a.useState(null),y=async t=>{try{const d=await j(t).unwrap();g(t),o(!0),b("Cập nhật danh mục"),u(d.value)}catch{i.error("Có lỗi xảy ra")}},w=async t=>{if(t.preventDefault(),!c.trim()||!p){i.warning("Vui lòng điền thông tin!");return}try{await f({id:p,body:{value:c}}).unwrap(),o(!1),u(""),g(null),i.success("Cập nhật thành công!"),l()}catch{i.error("Có lỗi xảy ra")}},C=a.useMemo(()=>[{name:"#",selector:t=>t.id,sortable:!0},{name:"Media",selector:t=>t.value,sortable:!0},{name:"Ngày tạo",selector:t=>t.createDate||"",right:!0,cell:t=>e.jsx("span",{children:x(t.createDate,"DD/MM/YYYY")})},{name:"Ngày chỉnh sửa",selector:t=>t.writeDate||"",right:!0,cell:t=>e.jsx("span",{children:x(t.writeDate,"DD/MM/YYYY")})},{name:"Hành động",selector:t=>e.jsx(h,{type:"button",className:"btn btn-success white mr-10",onClick:()=>y(t.id),children:"Cập nhật"})}],[y]);return e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"mt-10",children:" Link youtube"}),e.jsx(v,{autoClose:1e3}),e.jsx(N,{title:"",columns:C,data:s,defaultSortFieldId:"title",pagination:!0,progressPending:n,responsive:!0,dense:!0,customStyles:T}),e.jsx(r,{show:S,onHide:()=>{o(!1)},backdrop:"static",children:e.jsxs("form",{onSubmit:w,children:[e.jsx(r.Header,{closeButton:!0,children:e.jsxs(r.Title,{children:[" ",M," "]})}),e.jsxs(r.Body,{children:[e.jsx("label",{children:" Link youtube "}),e.jsx("input",{className:"form-control",name:"value",value:c,onChange:t=>u(t.target.value)})]}),e.jsxs(r.Footer,{children:[e.jsx(h,{variant:"secondary",type:"button",onClick:()=>{o(!1)},children:"Đóng"}),e.jsx(h,{variant:"primary",type:"submit",children:"Lưu"})]})]})})]})}const H={title:`Media - ${Y.appName}`};function U(){return e.jsxs(e.Fragment,{children:[e.jsx(B,{children:e.jsxs("title",{children:[" ",H.title]})}),e.jsx(G,{})]})}export{U as default};
