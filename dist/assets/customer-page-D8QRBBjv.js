import{R as k,e as d,c as B,j as e,B as c,H as D,d as H}from"./index-CGSQnQu3.js";import{e as M}from"./index.es-BVU3MIBu.js";import{r as s}from"./vendor-D10guwLI.js";import{c as F}from"./styles-Bw6Lb06x.js";import{M as r}from"./Modal-uUVsHhbb.js";const G=k.injectEndpoints({endpoints:l=>({getCustomers:l.query({query:()=>({url:d.dashboard.customers,method:"GET"})}),getCustomerById:l.query({query:o=>({url:`${d.dashboard.customers}/${o}`,method:"GET"})})})}),{useGetCustomersQuery:I,useLazyGetCustomerByIdQuery:_}=G,q=()=>{const{data:l=[],isLoading:o}=I(),[i]=_(),[u,n]=s.useState(!1),[h,x]=s.useState(""),[p,j]=s.useState(""),[b,g]=s.useState(""),[N,f]=s.useState(""),[y,v]=s.useState(""),[S,w]=s.useState(""),[C,E]=s.useState(""),m=s.useCallback(async a=>{try{const t=await i(a).unwrap();n(!0),x("Thông tin khách hàng"),j(t.firstName||""),g(t.lastName||""),f(t.phone||""),w(t.email||""),v(t.address||""),E(t.createDate||"")}catch{B.error("Có lỗi xảy ra")}},[i]),T=s.useMemo(()=>[{name:"#",selector:"id",sortable:!0},{name:"Họ",selector:"firstName",sortable:!0},{name:"Tên",selector:"lastName",sortable:!0},{name:"Số điện thoại",selector:"phone",sortable:!0,right:!0},{name:"Email",selector:"email",sortable:!0,right:!0},{name:"Ngày mua hàng",selector:"createDate",sortable:!0,right:!0},{name:"Ngày chỉnh sửa",selector:"writeDate",sortable:!0,right:!0},{name:"Hành động",selector:a=>e.jsx(c,{type:"button",className:"btn btn-primary white mr-10",onClick:()=>m(a.id),children:"Xem chi tiết"})}],[m]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mt-10 mbt-10",children:[e.jsx("h1",{className:"m-0",children:"Danh sách khách hàng"}),e.jsx("div",{children:e.jsx(c,{variant:"success",type:"button",onClick:()=>{window.open("https://kemnhanonline.vn/api/customers/export","_blank")},children:"Xuất Excel"})})]}),e.jsx(M,{title:"Khách hàng",columns:T,data:l,defaultSortFieldId:"title",pagination:!0,responsive:!0,progressPending:o,dense:!0,customStyles:F}),e.jsx(r,{show:u,size:"lg",onHide:()=>{n(!1)},children:e.jsxs("form",{onSubmit:a=>a.preventDefault(),children:[e.jsx(r.Header,{closeButton:!0,children:e.jsxs(r.Title,{children:[" ",h," "]})}),e.jsxs(r.Body,{children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"form-group col-6",children:[e.jsxs("label",{children:["Họ ",e.jsx("sup",{className:"sub_text",children:"*"})]}),e.jsx("input",{className:"form-control",value:p,disabled:!0})]}),e.jsxs("div",{className:" form-group col-6",children:[e.jsxs("label",{children:["Tên ",e.jsx("sup",{className:"sub_text",children:"*"})]}),e.jsx("input",{className:"form-control",value:b,disabled:!0})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:" form-group col-6",children:[e.jsxs("label",{children:["Số điện thoại ",e.jsx("sup",{className:"sub_text",children:"*"})]}),e.jsx("input",{className:"form-control",value:N.toString(),disabled:!0})]}),e.jsxs("div",{className:" form-group col-6",children:[e.jsxs("label",{children:["Email ",e.jsx("sup",{className:"sub_text",children:"*"})]}),e.jsx("input",{className:"form-control",value:S,disabled:!0})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:" form-group col-6",children:[e.jsx("label",{children:" Địa chỉ"}),e.jsx("input",{className:"form-control",value:y,disabled:!0})]}),e.jsxs("div",{className:" form-group col-6",children:[e.jsx("label",{children:" Ngày mua hàng"}),e.jsx("input",{className:"form-control",value:C,disabled:!0})]})]})]}),e.jsx(r.Footer,{children:e.jsx(c,{variant:"secondary",type:"button",onClick:()=>{n(!1)},children:"Đóng"})})]})})]})},A={title:`Khách hàng - ${H.appName}`};function $(){return e.jsxs(e.Fragment,{children:[e.jsx(D,{children:e.jsxs("title",{children:[" ",A.title]})}),e.jsx(q,{})]})}export{$ as default};
