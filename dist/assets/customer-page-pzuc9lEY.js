import{R as D,e as m,a as k,c as H,j as e,B as c,H as M,d as F}from"./index-Cisqq87o.js";import{r as s}from"./vendor-D10guwLI.js";import{e as G}from"./index.es-3P-hqikk.js";import{c as I}from"./styles-Bw6Lb06x.js";import{M as r}from"./Modal-BE1P8Ww6.js";const q=D.injectEndpoints({endpoints:l=>({getCustomers:l.query({query:()=>({url:m.dashboard.customers,method:"GET"})}),getCustomerById:l.query({query:o=>({url:`${m.dashboard.customers}/${o}`,method:"GET"})})})}),{useGetCustomersQuery:R,useLazyGetCustomerByIdQuery:_}=q,A=()=>{const{data:l=[],isLoading:o}=R(),d=k(),[i]=_(),[h,n]=s.useState(!1),[x,p]=s.useState(""),[j,g]=s.useState(""),[N,b]=s.useState(""),[f,y]=s.useState(""),[v,S]=s.useState(""),[C,w]=s.useState(""),[E,T]=s.useState(""),u=s.useCallback(async a=>{try{const t=await i(a).unwrap();n(!0),p("Thông tin khách hàng"),g(t.firstName||""),b(t.lastName||""),y(t.phone||""),w(t.email||""),S(t.address||""),T(t.createDate||"")}catch{H.error("Có lỗi xảy ra")}},[i]),B=s.useMemo(()=>[{name:"#",selector:"id",sortable:!0},{name:"Họ",selector:"firstName",sortable:!0},{name:"Tên",selector:"lastName",sortable:!0},{name:"Số điện thoại",selector:"phone",sortable:!0,right:!0},{name:"Email",selector:"email",sortable:!0,right:!0},{name:"Ngày mua hàng",selector:"createDate",sortable:!0,right:!0},{name:"Ngày chỉnh sửa",selector:"writeDate",sortable:!0,right:!0},{name:"Hành động",selector:a=>e.jsx(c,{type:"button",className:"btn btn-primary white mr-10",onClick:()=>u(a.id),children:"Xem chi tiết"})}],[u]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mt-10 mbt-10",children:[e.jsx("h1",{className:"m-0",children:"Danh sách khách hàng"}),e.jsx("div",{children:e.jsx(c,{variant:"success",type:"button",onClick:()=>{d.push("https://kemnhanonline.vn/api/customers/export")},children:"Xuất Excel"})})]}),e.jsx(G,{title:"Khách hàng",columns:B,data:l,defaultSortFieldId:"title",pagination:!0,responsive:!0,progressPending:o,dense:!0,customStyles:I}),e.jsx(r,{show:h,size:"lg",onHide:()=>{n(!1)},children:e.jsxs("form",{onSubmit:a=>a.preventDefault(),children:[e.jsx(r.Header,{closeButton:!0,children:e.jsxs(r.Title,{children:[" ",x," "]})}),e.jsxs(r.Body,{children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"form-group col-6",children:[e.jsxs("label",{children:["Họ ",e.jsx("sup",{className:"sub_text",children:"*"})]}),e.jsx("input",{className:"form-control",value:j,disabled:!0})]}),e.jsxs("div",{className:" form-group col-6",children:[e.jsxs("label",{children:["Tên ",e.jsx("sup",{className:"sub_text",children:"*"})]}),e.jsx("input",{className:"form-control",value:N,disabled:!0})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:" form-group col-6",children:[e.jsxs("label",{children:["Số điện thoại ",e.jsx("sup",{className:"sub_text",children:"*"})]}),e.jsx("input",{className:"form-control",value:f.toString(),disabled:!0})]}),e.jsxs("div",{className:" form-group col-6",children:[e.jsxs("label",{children:["Email ",e.jsx("sup",{className:"sub_text",children:"*"})]}),e.jsx("input",{className:"form-control",value:C,disabled:!0})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:" form-group col-6",children:[e.jsx("label",{children:" Địa chỉ"}),e.jsx("input",{className:"form-control",value:v,disabled:!0})]}),e.jsxs("div",{className:" form-group col-6",children:[e.jsx("label",{children:" Ngày mua hàng"}),e.jsx("input",{className:"form-control",value:E,disabled:!0})]})]})]}),e.jsx(r.Footer,{children:e.jsx(c,{variant:"secondary",type:"button",onClick:()=>{n(!1)},children:"Đóng"})})]})})]})},K={title:`Khách hàng - ${F.appName}`};function X(){return e.jsxs(e.Fragment,{children:[e.jsx(M,{children:e.jsxs("title",{children:[" ",K.title]})}),e.jsx(A,{})]})}export{X as default};
