import{r as a,j as e,B as c,Q as C,c as r,H as D,f as v}from"./index-CvJx62Zl.js";import{f as h}from"./format-time-CtTWvXUx.js";import{e as Y}from"./index.es-JOJxY1ZJ.js";import{c as B}from"./styles-Bw6Lb06x.js";import{u as N,a as k,b as F}from"./settings-DTSBE8aH.js";import{M as s}from"./Modal-DBHGt8c5.js";import"./useWillUnmount-CLlPHptt.js";function H(){const{data:p=[],isLoading:x,refetch:g}=N(),[y]=k(),[j]=F(),[f,n]=a.useState(!1),[b,M]=a.useState(""),[o,i]=a.useState(""),[u,d]=a.useState(null),m=async t=>{try{const l=await y(t).unwrap();d(t),n(!0),M("Cập nhật danh mục"),i(l.value)}catch{r.error("Có lỗi xảy ra")}},S=async t=>{if(t.preventDefault(),!o.trim()||!u){r.warning("Vui lòng điền thông tin!");return}try{await j({id:u,body:{value:o}}).unwrap(),n(!1),i(""),d(null),r.success("Cập nhật thành công!"),g()}catch{r.error("Có lỗi xảy ra")}},w=a.useMemo(()=>[{name:"#",selector:t=>t.id,sortable:!0},{name:"Media",selector:t=>t.value,sortable:!0},{name:"Ngày tạo",selector:t=>t.createDate||"",right:!0,cell:t=>e.jsx("span",{children:h(t.createDate,"DD/MM/YYYY")})},{name:"Ngày chỉnh sửa",selector:t=>t.writeDate||"",right:!0,cell:t=>e.jsx("span",{children:h(t.writeDate,"DD/MM/YYYY")})},{name:"Hành động",selector:t=>e.jsx(c,{type:"button",className:"btn btn-success white mr-10",onClick:()=>m(t.id),children:"Cập nhật"})}],[m]);return e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"mt-10",children:" Link youtube"}),e.jsx(C,{autoClose:1e3}),e.jsx(Y,{title:"",columns:w,data:p,defaultSortFieldId:"title",pagination:!0,progressPending:x,responsive:!0,dense:!0,customStyles:B}),e.jsx(s,{show:f,onHide:()=>{n(!1)},backdrop:"static",children:e.jsxs("form",{onSubmit:S,children:[e.jsx(s.Header,{closeButton:!0,children:e.jsxs(s.Title,{children:[" ",b," "]})}),e.jsxs(s.Body,{children:[e.jsx("label",{children:" Link youtube "}),e.jsx("input",{className:"form-control",name:"value",value:o,onChange:t=>i(t.target.value)})]}),e.jsxs(s.Footer,{children:[e.jsx(c,{variant:"secondary",type:"button",onClick:()=>{n(!1)},children:"Đóng"}),e.jsx(c,{variant:"primary",type:"submit",children:"Lưu"})]})]})})]})}const L={title:`Media - ${v.appName}`};function _(){return e.jsxs(e.Fragment,{children:[e.jsx(D,{children:e.jsxs("title",{children:[" ",L.title]})}),e.jsx(H,{})]})}export{_ as default};
